(defvar *data*)

(defun requirements-not-met (reqs done step)
  (some (lambda (x) (not (member x done)))
        (mapcar #'car (remove-if-not (lambda (x)
                                       (eq (cdr x) step))
                                     reqs))))

(defun adv07 ()
  (let ((all (delete-duplicates (append (mapcar #'car *data*)
                                        (mapcar #'cdr *data*))))
        (nonfree (delete-duplicates (mapcar #'cdr *data*))))
    (do ((available (sort (set-difference all nonfree) #'string< :key #'symbol-name)
                    (sort available #'string< :key #'symbol-name))
         (result '()))
        ((null available) (format t "狺ア铗弼弪箦蝈篚祠┅戾è铄痫狯衢灬忪濠┅瘐箬铄蝈篚祠ㄤ镬轶篝屦犰飑躅戾篌矧礤礅弪篝屦狯衢灬忪濠礤礅弪篝屦蝈篚祠蝈聃轵屙孱趔铒舡礤溽翎蝈篚祠篝屦┅瘐箬篝屦狯衢灬忪濠┅┅┅ㄤ彐躅篝屦糸礤篝屦ǐ侗ōㄣ栳颦泔溴ㄣ栳簌礅镬钺礤篝屦癌ㄣ栳颦泔溴＼俩┅ㄤ彐躅徜霭封ī戾è犰ㄤ屐弭瀛漉痨殂狒弩ㄡ痧孱磲疸狎＇汜溽翎磲疸狎＇沅溽翎┅┅铒铈蝈ㄤ屐弭瀛漉痨殂狒弩磲疸狎＇沅溽翎┅┅ㄤè狯衢灬忪箫螋箦舡溟骀弪孱沐犰铒铈蝈濠＇篝蜷铉弘妁＇簌礅镬钺礤┅糸礤ū糸礤┅躅溴蝼狴Ж┅ㄩ潇旦蝈篚祠Ж┅è犷铛祆狯衢灬忪濠铛祆躅溴蝼狴┅糸礤祜镳麒殪ㄡ钿殇戾癌狯衢灬忪濠滹戾è铄痫狯衢灬忪濠┅瘐箬ㄣ镱铄篝屦糸礤铄舂躅溴蝼狴ㄤ邈殇戾┅箦翩躅溴蝼狴磲疸犷灬礅溽黠螂ㄣ镱èㄣ潋黠螂暴扉篝ㄣ镱ㄣ狎黠螂ūㄣ潋黠螂┅┅瘐箬ㄣ狎黠螂蝈篚祠ㄩ钽殇戾ㄤ镬轶篝屦犰飑躅戾篌矧礤礅弪篝屦狯衢灬忪濠礤礅弪篝屦躅溴蝼狴弘妁＇汜颟礤礅弪篝屦蝈篚祠蝈聃轵屙孱趔铒舡礤溽翎蝈篚祠篝屦┅瘐箬篝屦狯衢灬忪濠┅箦翩狯衢灬忪箫螋狯衢灬忪＇篝蜷铉弘妁＇簌礅镬钺礤┅铋飑┅躅溴蝼狴┅┅换尼翎ㄤ彐疳蜥礤翦溽翎Жㄊ农ㄘ签俩ㄋ桐ㄐ讴ㄆ烯嫂ㄕ砖药ㄅ药ㄈ茅ㄏ萤ㄑ侃ㄖ砖ㄔ惟ㄓ嫂ㄙ砖ㄚ茅ㄍ泰ㄌ砖ㄎ嫂ㄉ签签ㄇ药ㄒ砖ㄚ药ㄚ惟ㄇ砖ㄌ签ㄙ药ㄐ嫂砖ㄔ签ㄔ药ㄖ讴ㄌ茅ㄋ嫂ㄊ嫂ㄑ茅ㄆ俩ㄈ侃ㄍ惟ㄐ醛ㄍ茅ㄖ侃ㄏ蜘ㄏ雪签ㄔ讴ㄋ药ㄈ烯ㄏ侃ㄏ茅ㄋ些ㄐ譬ㄅ桐ㄍ嫂ㄔ砖ㄐ泰烯ㄘ蜘ㄓ签侃ㄊ药ㄋ譬ㄊ俩ㄐ茅ㄅ惟ㄆ侃ㄊ末ㄈ讴ㄕ醛ㄊ冤ㄖ签ㄚ嫂ㄈ砖药ㄆ漏ㄘ茅ㄌ药ㄆ诈惟ㄐ烯烯ㄆ茅ㄈ泰ㄏ惟ㄊ侃ㄈ惟ㄏ泰ㄉ砖ㄊ醛讴ㄆ砖ㄘ砖ㄙ桐ㄔ桐ㄕ签ㄌ嫂ㄎ砖ㄅ茅┅